{{template "header" .}}

<main class="mdl-layout__content">
    <div class="page-content">

        <!-- Wide card with share menu button -->
        <style>

            .demo-card-wide.mdl-card {
                width: 100%;
            }
            .demo-card-wide > .mdl-card__title {
                color: #fff;
                height: 176px;
            }
            .demo-card-wide > .mdl-card__menu {
                color: #fff;
            }
            .demo-card-wide > .mdl-card__admin_title {
                background: url('https://getmdl.io/assets/demos/transparent.jpg') center / cover;
            }
        </style>

        <div class="mdl-grid">
            {{ if eq (len .AppDetailList) 0 }}
            You need app authority. Please contact your administrator.
            {{end}}
            {{ range .AppDetailList }}
            {{ if eq .App.AppId 0 }}
            <div class="mdl-cell mdl-cell--4-col">
                <div class="demo-card-wide mdl-card mdl-shadow--2dp">
                    <div class="mdl-card__title mdl-card__admin_title" >
                        <h2 class="mdl-card__title-text">Admin</h2>
                    </div>
                    <div class="mdl-card__supporting-text">
                        Your are administrator.
                    </div>
                    <div class="mdl-card__actions mdl-card--border">
                        <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" href="/a/0/userapp">
                            User list
                        </a>
                        <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" href="/newApp">
                            New App
                        </a>
                    </div>
                </div>
            </div>
            {{ else }}
            <div class="mdl-cell mdl-cell--4-col">
                <div class="demo-card-wide mdl-card mdl-shadow--2dp">
                    <div class="mdl-card__title" style="background-image: url('{{ .App.ImageUrl.String }}')">
                        <h2 class="mdl-card__title-text">{{ .App.AppName }}</h2>
                    </div>
                    <div class="mdl-card__supporting-text">
                        {{ .App.Description }}
                    </div>
                    <div class="mdl-card__actions mdl-card--border">
                        {{ range .Versions }}
                        <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" href="/a/{{.AppId}}/v/{{.VersionId}}/file">
                            {{ .Description }}
                        </a>
                        {{ end }}

                    </div>
                    <div class="mdl-card__menu">
                        <button id="app-menu-{{ .App.AppId }}"
                                class="mdl-button mdl-js-button mdl-button--icon">
                            <i class="material-icons">more_vert</i>
                        </button>
                        <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect"
                            for="app-menu-{{ .App.AppId }}">
                            <li class="mdl-menu__item">
                                <a href="/a/{{ .App.AppId }}/detail" style="display:block;">
                                    {{ if call $.CheckAdminAuthority .App.AppId }}
                                    App Settings
                                    {{ else }}
                                    App Details
                                    {{ end }}
                                </a>
                            </li>
                            <li class="mdl-menu__item">
                                <a href="/a/{{ .App.AppId }}/userapp" style="display:block;">
                                    {{ if call $.CheckAdminAuthority .App.AppId }}
                                    Member Settings
                                    {{ else }}
                                    Members
                                    {{ end }}
                                </a>
                            </li>
                            <li class="mdl-menu__item">
                                <a href="/a/{{ .App.AppId }}/env" style="display:block;">
                                    {{ if call $.CheckAdminAuthority .App.AppId }}
                                    Env Settings
                                    {{ else }}
                                    Env Details
                                    {{ end }}
                                </a>
                            </li>
                        </ul>
                    </div>

                </div>
            </div>
            {{ end }}
            {{ end }}
        </div>


    </div>
</main>
</html>